<% title = "Meus livros"; %>

<section class="books-grid">
  <% if (!books || books.length === 0) { %>
    <div class="empty">Nenhum livro cadastrado.</div>
  <% } %>

  <% books.forEach(book => { %>
    <article class="card">

      <div class="cover-wrap">
        <% if (book.cover_url) { %>
          <img src="<%= book.cover_url %>" alt="Capa de <%= book.title %>">
        <% } else { %>
          <img src="/images/placeholder.png" alt="Sem capa">
        <% } %>
      </div>

      <div class="card-body">
        <h3><%= book.title %></h3>
        <p class="muted">por <%= book.author || '—' %></p>

        <% if (book.rating) { %>
          <p class="rating">
            <% 
              const fullStars = '★★★★★';
              const emptyStars = '☆☆☆☆☆';
            %>

            <span class="stars">
              <%= fullStars.slice(0, book.rating) + emptyStars.slice(book.rating) %>
            </span>
          </p>
        <% } %>

        <% if (book.read_date) { %>
          <p class="muted">
            Lido em:
            <strong><%= new Date(book.read_date).toLocaleDateString("pt-BR") %></strong>
          </p>
        <% } %>

        <p class="notes"><%= book.notes || "Sem notas" %></p>
      </div>

      <div class="card-actions">
        <a class="btn small" href="/books/edit/<%= book.id %>">Editar</a>
        <a class="btn small danger" href="/books/delete/<%= book.id %>">Excluir</a>
      </div>

    </article>
  <% }) %>
</section>